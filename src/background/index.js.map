{"version":3,"file":"index.js","sources":["../../node_modules/@babel/runtime/helpers/classCallCheck.js","../../node_modules/crx-hotreload/hot-reload.js","dev/index.js"],"sourcesContent":["function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","const filesInDirectory = dir => new Promise (resolve =>\n\n    dir.createReader ().readEntries (entries =>\n\n        Promise.all (entries.filter (e => e.name[0] !== '.').map (e =>\n\n            e.isDirectory\n                ? filesInDirectory (e)\n                : new Promise (resolve => e.file (resolve))\n        ))\n        .then (files => [].concat (...files))\n        .then (resolve)\n    )\n)\n\nconst timestampForFilesInDirectory = dir =>\n        filesInDirectory (dir).then (files =>\n            files.map (f => f.name + f.lastModifiedDate).join ())\n\nconst reload = () => {\n\n    chrome.tabs.query ({ active: true, currentWindow: true }, tabs => { // NB: see https://github.com/xpl/crx-hotreload/issues/5\n\n        if (tabs[0]) { chrome.tabs.reload (tabs[0].id) }\n\n        chrome.runtime.reload ()\n    })\n}\n\nconst watchChanges = (dir, lastTimestamp) => {\n\n    timestampForFilesInDirectory (dir).then (timestamp => {\n\n        if (!lastTimestamp || (lastTimestamp === timestamp)) {\n\n            setTimeout (() => watchChanges (dir, timestamp), 1000) // retry after 1s\n\n        } else {\n\n            reload ()\n        }\n    })\n\n}\n\nchrome.management.getSelf (self => {\n\n    if (self.installType === 'development') {\n\n        chrome.runtime.getPackageDirectoryEntry (dir => watchChanges (dir))\n    }\n})\n","import 'crx-hotreload';\n\nclass Background {\n    constructor() {\n        console.log(this.constructor.name);\n        chrome.browserAction.setBadgeText({ text: 'ON' });\n        chrome.browserAction.setBadgeBackgroundColor({ color: 'red' });\n    }\n}\n\nexport default new Background();\n"],"names":["Background","console","log","constructor","name","chrome","browserAction","setBadgeText","text","setBadgeBackgroundColor","color"],"mappings":";;;;;;EAAA,SAAS,eAAe,CAAC,QAAQ,EAAE,WAAW,EAAE;IAC9C,IAAI,EAAE,QAAQ,YAAY,WAAW,CAAC,EAAE;MACtC,MAAM,IAAI,SAAS,CAAC,mCAAmC,CAAC,CAAC;KAC1D;GACF;;EAED,kBAAc,GAAG,eAAe;;ECNhC,MAAM,gBAAgB,GAAG,GAAG,IAAI,IAAI,OAAO,EAAE,OAAO;;EAEpD,IAAI,GAAG,CAAC,YAAY,GAAG,CAAC,WAAW,EAAE,OAAO;;EAE5C,QAAQ,OAAO,CAAC,GAAG,EAAE,OAAO,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;;EAEnE,YAAY,CAAC,CAAC,WAAW;EACzB,kBAAkB,gBAAgB,EAAE,CAAC,CAAC;EACtC,kBAAkB,IAAI,OAAO,EAAE,OAAO,IAAI,CAAC,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;EAC3D,SAAS,CAAC;EACV,SAAS,IAAI,EAAE,KAAK,IAAI,EAAE,CAAC,MAAM,EAAE,GAAG,KAAK,CAAC,CAAC;EAC7C,SAAS,IAAI,EAAE,OAAO,CAAC;EACvB,KAAK;EACL,EAAC;;EAED,MAAM,4BAA4B,GAAG,GAAG;EACxC,QAAQ,gBAAgB,EAAE,GAAG,CAAC,CAAC,IAAI,EAAE,KAAK;EAC1C,YAAY,KAAK,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,gBAAgB,CAAC,CAAC,IAAI,GAAG,EAAC;;EAEjE,MAAM,MAAM,GAAG,MAAM;;EAErB,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,aAAa,EAAE,IAAI,EAAE,EAAE,IAAI,IAAI;;EAEtE,QAAQ,IAAI,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,EAAC,EAAE;;EAExD,QAAQ,MAAM,CAAC,OAAO,CAAC,MAAM,IAAG;EAChC,KAAK,EAAC;EACN,EAAC;;EAED,MAAM,YAAY,GAAG,CAAC,GAAG,EAAE,aAAa,KAAK;;EAE7C,IAAI,4BAA4B,EAAE,GAAG,CAAC,CAAC,IAAI,EAAE,SAAS,IAAI;;EAE1D,QAAQ,IAAI,CAAC,aAAa,KAAK,aAAa,KAAK,SAAS,CAAC,EAAE;;EAE7D,YAAY,UAAU,EAAE,MAAM,YAAY,EAAE,GAAG,EAAE,SAAS,CAAC,EAAE,IAAI,EAAC;;EAElE,SAAS,MAAM;;EAEf,YAAY,MAAM,IAAG;EACrB,SAAS;EACT,KAAK,EAAC;;EAEN,EAAC;;EAED,MAAM,CAAC,UAAU,CAAC,OAAO,EAAE,IAAI,IAAI;;EAEnC,IAAI,IAAI,IAAI,CAAC,WAAW,KAAK,aAAa,EAAE;;EAE5C,QAAQ,MAAM,CAAC,OAAO,CAAC,wBAAwB,EAAE,GAAG,IAAI,YAAY,EAAE,GAAG,CAAC,EAAC;EAC3E,KAAK;EACL,CAAC,CAAC;;MCjDIA,aACF,sBAAc;EAAA;;EACVC,EAAAA,OAAO,CAACC,GAAR,CAAY,KAAKC,WAAL,CAAiBC,IAA7B;EACAC,EAAAA,MAAM,CAACC,aAAP,CAAqBC,YAArB,CAAkC;EAAEC,IAAAA,IAAI,EAAE;EAAR,GAAlC;EACAH,EAAAA,MAAM,CAACC,aAAP,CAAqBG,uBAArB,CAA6C;EAAEC,IAAAA,KAAK,EAAE;EAAT,GAA7C;EACH;;AAGL,cAAe,IAAIV,UAAJ,EAAf;;;;;;;;"}