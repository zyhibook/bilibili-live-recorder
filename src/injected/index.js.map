{"version":3,"file":"index.js","sources":["../../node_modules/@babel/runtime/helpers/classCallCheck.js","dev/index.js"],"sourcesContent":["function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","import './index.scss';\n\nclass Injected {\n    constructor() {\n        const { appendBuffer } = SourceBuffer.prototype;\n        SourceBuffer.prototype.appendBuffer = function(buf) {\n            window.postMessage({\n                type: 'MP4Buffer',\n                data: buf.slice(),\n            });\n            return appendBuffer.call(this, buf);\n        };\n\n        const { read } = ReadableStreamDefaultReader.prototype;\n        ReadableStreamDefaultReader.prototype.read = function() {\n            const promiseResult = read.call(this);\n            promiseResult.then(({ done, value }) => {\n                if (done) return;\n                window.postMessage({\n                    type: 'FLVBuffer',\n                    data: value.slice(),\n                });\n            });\n            return promiseResult;\n        };\n    }\n}\n\nexport default new Injected();\n"],"names":["Injected","appendBuffer","SourceBuffer","prototype","buf","window","postMessage","type","data","slice","call","read","ReadableStreamDefaultReader","promiseResult","then","done","value"],"mappings":";;;;;;EAAA,SAAS,eAAe,CAAC,QAAQ,EAAE,WAAW,EAAE;IAC9C,IAAI,EAAE,QAAQ,YAAY,WAAW,CAAC,EAAE;MACtC,MAAM,IAAI,SAAS,CAAC,mCAAmC,CAAC,CAAC;KAC1D;GACF;;EAED,kBAAc,GAAG,eAAe;;MCJ1BA,WACF,oBAAc;EAAA;;EAAA,MACFC,YADE,GACeC,YAAY,CAACC,SAD5B,CACFF,YADE;;EAEVC,EAAAA,YAAY,CAACC,SAAb,CAAuBF,YAAvB,GAAsC,UAASG,GAAT,EAAc;EAChDC,IAAAA,MAAM,CAACC,WAAP,CAAmB;EACfC,MAAAA,IAAI,EAAE,WADS;EAEfC,MAAAA,IAAI,EAAEJ,GAAG,CAACK,KAAJ;EAFS,KAAnB;EAIA,WAAOR,YAAY,CAACS,IAAb,CAAkB,IAAlB,EAAwBN,GAAxB,CAAP;EACH,GAND;;EAFU,MAUFO,IAVE,GAUOC,2BAA2B,CAACT,SAVnC,CAUFQ,IAVE;;EAWVC,EAAAA,2BAA2B,CAACT,SAA5B,CAAsCQ,IAAtC,GAA6C,YAAW;EACpD,QAAME,aAAa,GAAGF,IAAI,CAACD,IAAL,CAAU,IAAV,CAAtB;EACAG,IAAAA,aAAa,CAACC,IAAd,CAAmB,gBAAqB;EAAA,UAAlBC,IAAkB,QAAlBA,IAAkB;EAAA,UAAZC,KAAY,QAAZA,KAAY;EACpC,UAAID,IAAJ,EAAU;EACVV,MAAAA,MAAM,CAACC,WAAP,CAAmB;EACfC,QAAAA,IAAI,EAAE,WADS;EAEfC,QAAAA,IAAI,EAAEQ,KAAK,CAACP,KAAN;EAFS,OAAnB;EAIH,KAND;EAOA,WAAOI,aAAP;EACH,GAVD;EAWH;;AAGL,cAAe,IAAIb,QAAJ,EAAf;;;;;;;;"}