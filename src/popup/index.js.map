{"version":3,"file":"index.js","sources":["../../node_modules/@babel/runtime/helpers/classCallCheck.js","../../node_modules/@babel/runtime/helpers/createClass.js","../constant.js","dev/index.js"],"sourcesContent":["function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","export const bilibili = 'https://live.bilibili.com';\nexport const github = 'https://github.com/zhw2590582/bilibili-live-downloader';\nexport const webstore = 'https://chrome.google.com/webstore/category/extensions';\n","import 'normalize.css';\nimport './index.scss';\nimport { bilibili, github, webstore } from '../../constant';\n\nclass Popup {\n    constructor() {\n        this.$headerItems = Array.from(document.querySelectorAll('.header .item'));\n        this.$mainPanels = Array.from(document.querySelectorAll('.main .panel'));\n        this.$fileName = document.querySelector('.fileName');\n        this.$disabled = document.querySelector('.disabled');\n        this.$limit = document.querySelector('.limit');\n        this.$limitSize = document.querySelector('.limit_size');\n        this.$limitDuration = document.querySelector('.limit_duration');\n        this.$size = document.querySelector('.size');\n        this.$duration = document.querySelector('.duration');\n        this.$fileSize = document.querySelector('.fileSize');\n        this.$fileDuration = document.querySelector('.fileDuration');\n        this.$version = document.querySelector('.version');\n        this.$feedback = document.querySelector('.feedback');\n\n        this.initInfo();\n        this.initSwitch();\n        this.initLimit();\n\n        const { version } = chrome.runtime.getManifest();\n        this.$version.textContent = version;\n        this.$version.addEventListener('click', () => {\n            chrome.tabs.create({ url: webstore });\n        });\n        this.$feedback.addEventListener('click', () => {\n            chrome.tabs.create({ url: github });\n        });\n    }\n\n    initInfo() {\n        chrome.tabs.query(\n            {\n                active: true,\n            },\n            tabs => {\n                if (tabs && tabs[0]) {\n                    const tab = tabs[0];\n                    if (tab.url.startsWith(bilibili)) {\n                        this.$fileName.value = tab.title;\n                    } else {\n                        // this.$disabled.classList.add('show');\n                    }\n                }\n            },\n        );\n    }\n\n    initSwitch() {\n        this.$headerItems.forEach(($item, $index) => {\n            $item.addEventListener('click', () => {\n                this.$headerItems.forEach(item => {\n                    if ($item === item) {\n                        item.classList.add('active');\n                    } else {\n                        item.classList.remove('active');\n                    }\n                });\n                this.$mainPanels.forEach((item, index) => {\n                    if ($index === index) {\n                        item.classList.add('active');\n                    } else {\n                        item.classList.remove('active');\n                    }\n                });\n            });\n        });\n    }\n\n    initLimit() {\n        this.$fileSize.addEventListener('change', () => {\n            this.$size.textContent = this.$fileSize.value + 'M';\n        });\n        this.$fileDuration.addEventListener('change', () => {\n            this.$duration.textContent = this.$fileDuration.value + '分钟';\n        });\n        this.$limit.addEventListener('change', () => {\n            [this.$limitSize, this.$limitDuration].forEach($item => {\n                if ($item.classList.contains(this.$limit.value)) {\n                    $item.classList.add('active');\n                } else {\n                    $item.classList.remove('active');\n                }\n            });\n        });\n    }\n}\n\nexport default new Popup();\n"],"names":["bilibili","github","webstore","Popup","$headerItems","Array","from","document","querySelectorAll","$mainPanels","$fileName","querySelector","$disabled","$limit","$limitSize","$limitDuration","$size","$duration","$fileSize","$fileDuration","$version","$feedback","initInfo","initSwitch","initLimit","chrome","runtime","getManifest","version","textContent","addEventListener","tabs","create","url","query","active","tab","startsWith","value","title","forEach","$item","$index","item","classList","add","remove","index","contains"],"mappings":"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"}