/*!
 * bilibili-live-downloader v1.0.0
 * Github: undefined
 * (c) 2018-2019 Harvey Zack
 * Released under the MIT License.
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Popup=t()}(this,(function(){"use strict";var e=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e},n="https://github.com/zhw2590582/bilibili-live-downloader",o="https://chrome.google.com/webstore/category/extensions";return new(function(){function t(){e(this,t),this.$headerItems=Array.from(document.querySelectorAll(".header .item")),this.$mainPanels=Array.from(document.querySelectorAll(".main .panel")),this.$fileName=document.querySelector(".fileName"),this.$disabled=document.querySelector(".disabled"),this.$limit=document.querySelector(".limit"),this.$limitSize=document.querySelector(".limit_size"),this.$limitDuration=document.querySelector(".limit_duration"),this.$size=document.querySelector(".size"),this.$duration=document.querySelector(".duration"),this.$fileSize=document.querySelector(".fileSize"),this.$fileDuration=document.querySelector(".fileDuration"),this.$version=document.querySelector(".version"),this.$feedback=document.querySelector(".feedback"),this.initInfo(),this.initSwitch(),this.initLimit();var i=chrome.runtime.getManifest().version;this.$version.textContent=i,this.$version.addEventListener("click",(function(){chrome.tabs.create({url:o})})),this.$feedback.addEventListener("click",(function(){chrome.tabs.create({url:n})}))}return i(t,[{key:"initInfo",value:function(){var e=this;chrome.tabs.query({active:!0},(function(t){if(t&&t[0]){var i=t[0];i.url.startsWith("https://live.bilibili.com")&&(e.$fileName.value=i.title)}}))}},{key:"initSwitch",value:function(){var e=this;this.$headerItems.forEach((function(t,i){t.addEventListener("click",(function(){e.$headerItems.forEach((function(e){t===e?e.classList.add("active"):e.classList.remove("active")})),e.$mainPanels.forEach((function(e,t){i===t?e.classList.add("active"):e.classList.remove("active")}))}))}))}},{key:"initLimit",value:function(){var e=this;this.$fileSize.addEventListener("change",(function(){e.$size.textContent=e.$fileSize.value+"M"})),this.$fileDuration.addEventListener("change",(function(){e.$duration.textContent=e.$fileDuration.value+"分钟"})),this.$limit.addEventListener("change",(function(){[e.$limitSize,e.$limitDuration].forEach((function(t){t.classList.contains(e.$limit.value)?t.classList.add("active"):t.classList.remove("active")}))}))}}]),t}())}));
